<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Page</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Search</h1>
    </header>
    <main>
        <form id="searchForm">
            <input type="text" id="searchInput" placeholder="Search..." required>
            <button type="submit">Search</button>
        </form>
        <div id="results"></div>
    </main>
    <script>
        // check if theres a search query in the URL and populate the search input and trigger the search and change the site title if theres a search query
        const urlParams = new URLSearchParams(window.location.search);
        const queryParam = urlParams.get('q');
        if (queryParam) {
            document.getElementById('searchInput').value = queryParam;
            document.title = `Search results for "${queryParam}" - lecanact`;
            document.getElementById('searchForm').dispatchEvent(new Event('submit'));
        }
        document.getElementById('searchForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const query = document.getElementById('searchInput').value;
            document.title = `Search results for "${query}" - lecanact`;
            fetch(`https://lecanact.spook.bio/search?q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(data => {
                    const resultsDiv = document.getElementById('results');
                    resultsDiv.innerHTML = '';
                    if (data.results && data.results.length > 0) {
                        data.results.forEach(item => {
                            const div = document.createElement('div');
                            div.textContent = item.name; // Adjust based on actual data structure
                            resultsDiv.appendChild(div);
                        });
                    } else {
                        resultsDiv.textContent = 'No results found.';
                    }
                })
                .catch(error => {
                    console.error('Error fetching search results:', error);
                    document.getElementById('results').textContent = 'An error occurred while searching.';
                });
        });
    </script>
</body>
</html>